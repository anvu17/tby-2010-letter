
<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Thi·ªáp ch√∫c m·ª´ng 20/10 üíå</title>
<style>
body {
  margin: 0;
  font-family: 'Comic Sans MS', cursive;
  background: #fff0f5;
  overflow: hidden;
}

/* üå∫ PHONG B√å */
#envelope-container {
  position: relative;
  width: 340px;
  height: 230px;
  margin: 150px auto;
  cursor: pointer;
  perspective: 1200px;
}

.envelope {
  width: 100%;
  height: 100%;
  background: linear-gradient(180deg, #ffc1cc, #ffb6c1);
  border-radius: 8px;
  position: relative;
  box-shadow: 0 12px 25px rgba(0,0,0,0.25);
  overflow: hidden;
}

/* ‚úâÔ∏è N·∫Øp phong b√¨ */
.flap {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 55%;
  background: linear-gradient(180deg, #ff99aa, #ff7fa3);
  clip-path: polygon(0 0, 50% 100%, 100% 0);
  transform-origin: top;
  transition: transform 1s ease;
  z-index: 3;
  border-top-left-radius: 8px;
  border-top-right-radius: 8px;
}

/* ‚úâÔ∏è Th√¢n d∆∞·ªõi */
.envelope::before {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 55%;
  background: linear-gradient(180deg, #ffcdd2, #f48fb1);
  clip-path: polygon(0 0, 50% 100%, 100% 0);
  transform: rotate(180deg);
  z-index: 1;
}

/* üéÄ N∆† ƒê·∫∏P M·ªÄM M·∫†I */
.bow {
  position: absolute;
  top: 48%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 110px;
  height: 60px;
  z-index: 4;
  transition: opacity 0.6s ease;
}
.bow.hide {
  opacity: 0;
}

/* Hai c√°nh n∆° */
.bow::before,
.bow::after {
  content: "";
  position: absolute;
  top: 50%;
  width: 55px;
  height: 42px;
  background: radial-gradient(circle at 30% 30%, #ffb6c1, #ff6f91 80%);
  border-radius: 50% 50% 40% 40%;
  box-shadow: inset -3px -3px 6px rgba(255,255,255,0.5),
              inset 3px 3px 6px rgba(255,105,135,0.5);
  opacity: 0.95;
}

/* C√°nh tr√°i */
.bow::before {
  left: 0;
  transform: translateY(-50%) rotate(-20deg);
}

/* C√°nh ph·∫£i */
.bow::after {
  right: 0;
  transform: translateY(-50%) rotate(20deg);
}

/* Ph·∫ßn gi·ªØa n∆° */
.bow .center {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 34px;
  height: 34px;
  transform: translate(-50%, -50%);
  background: radial-gradient(circle at 30% 30%, #ff80ab, #ff3d7a);
  border-radius: 50%;
  box-shadow: 0 0 8px rgba(255,182,193,0.7), inset 0 0 6px rgba(255,255,255,0.8);
}

/* Hi·ªáu ·ª©ng khi hover: n∆° rung nh·∫π */
.bow:hover {
  animation: wobble 1.2s ease infinite;
}
@keyframes wobble {
  0%, 100% { transform: translate(-50%, -50%) rotate(0deg); }
  25% { transform: translate(-50%, -50%) rotate(-3deg); }
  75% { transform: translate(-50%, -50%) rotate(3deg); }
}

/* üìú L√° th∆∞ */
.letter {
  position: absolute;
  bottom: 10px;
  left: 10%;
  width: 80%;
  height: 0;
  background: white;
  border-radius: 5px;
  text-align: center;
  overflow: hidden;
  box-shadow: 0 0 10px rgba(255,182,193,0.8);
  transition: height 1s ease, transform 1s ease;
  z-index: 2;
}
.letter p {
  margin-top: 70px;
  color: #ff69b4;
  font-weight: bold;
}

/* Hi·ªáu ·ª©ng m·ªü */
.envelope.open .flap {
  transform: rotateX(180deg);
}
.envelope.open .letter {
  height: 180px;
  transform: translateY(-60px);
}

/* --- THI·ªÜP --- */
#card {
  display: none;
  text-align: center;
  padding: 40px;
  animation: fadeIn 1s ease;
}
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* ‚ú® Khung thi·ªáp */
.card-frame {
  display: inline-block;
  padding: 30px;
  border: 6px solid #ffc1cc;
  border-radius: 20px;
  background: #fff;
  box-shadow: 0 0 20px rgba(255,182,193,0.5);
}

.card-frame h1 {
  color: #ff69b4;
}
.card-frame p {
  color: #444;
  font-size: 18px;
}

/* üéÅ H·ªòP QU√Ä TO V√Ä N·ªîI B·∫¨T H∆†N */
#gift {
  width: 300px; /* to g·∫•p ƒë√¥i */
  margin-top: 30px;
  cursor: pointer;
  transition: transform 0.4s ease, filter 0.4s ease;
  animation: giftPulse 2s ease-in-out infinite;
  filter: drop-shadow(0 0 15px rgba(255, 105, 180, 0.5));
}

/* Hi·ªáu ·ª©ng rung s√°ng nh·∫π */
@keyframes giftPulse {
  0%, 100% { transform: scale(1) rotate(0deg); filter: drop-shadow(0 0 10px rgba(255, 182, 193, 0.6)); }
  50% { transform: scale(1.08) rotate(1deg); filter: drop-shadow(0 0 20px rgba(255, 105, 180, 0.8)); }
}

/* Khi r√™ chu·ªôt v√†o */
#gift:hover {
  transform: scale(1.15) rotate(-3deg);
  filter: drop-shadow(0 0 30px rgba(255, 20, 147, 0.9));
}


/* --- POPUP --- */
#popupContainer { display: none; }

.popup {
  position: absolute;
  padding: 10px 20px;
  font-weight: bold;
  font-size: 18px;
  color: white;
  border-radius: 12px;
  background: linear-gradient(135deg, #ff9a9e, #fecfef);
  box-shadow: 0 0 20px #ff80ab, 0 0 40px #ffb6c1;
  text-shadow: 0 0 10px rgba(255,255,255,0.8);
  animation: fadeOut 10s ease forwards, float 2s ease-in-out infinite alternate;
}

.dialog {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: linear-gradient(135deg, #ff9a9e, #fecfef);
  padding: 25px;
  border-radius: 15px;
  font-size: 26px;
  color: white;
  text-align: center;
  box-shadow: 0 0 25px #ffb6c1, 0 0 50px #ff80ab;
  z-index: 1000;
  border: 2px solid rgba(255,255,255,0.4);
}

@keyframes fadeOut {
  0% { opacity: 1; transform: scale(1); }
  100% { opacity: 0; transform: scale(0.5); }
}
@keyframes float {
  from { transform: translateY(0px); }
  to { transform: translateY(-20px); }
}

body.bgAnimated {
  background: linear-gradient(270deg, #ff9a9e, #fecfef, #fcbad3, #fcd1d1);
  background-size: 800% 800%;
  animation: bgMove 20s ease infinite;
}
@keyframes bgMove {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

#exitButton {
  position: fixed;
  top: 20px;
  right: 20px;
  padding: 10px 18px;
  font-size: 18px;
  font-weight: bold;
  color: white;
  background: linear-gradient(135deg, #ff80ab, #ffb6c1);
  border: none;
  border-radius: 30px;
  cursor: pointer;
  box-shadow: 0 0 15px rgba(255, 182, 193, 0.8);
  z-index: 2000;
  display: none;
  transition: all 0.3s ease;
}
#exitButton:hover {
  transform: scale(1.1);
  box-shadow: 0 0 25px #ff80ab;
}
</style>
</head>
<body>

<!-- üíå PHONG B√å -->
<div id="envelope-container">
  <div class="envelope" id="envelope">
    <div class="flap"></div>
    <div class="bow"><div class="center"></div></div>
    <div class="letter">
      <p>B·∫•m ƒë·ªÉ m·ªü th∆∞ üíå</p>
    </div>
  </div>
</div>

<!-- üå∏ THI·ªÜP -->
<div id="card">
  <div class="card-frame">
    <h1>Ch√∫c m·ª´ng ng√†y Ph·ª• N·ªØ Vi·ªát Nam 20/10 üíê</h1>
    <p>B·∫°n c√≥ th·ªÉ vi·∫øt l·ªùi ch√∫c ri√™ng ·ªü ƒë√¢y...</p>
    <img id="gift" src="assets/gift.png" alt="Gift Box üéÅ">
  </div>
</div>

<!-- üíñ POPUP -->
<div id="popupContainer">
  <div id="startDialog" class="dialog">Click v√†o m√†n h√¨nh nhaaa üíñ</div>
  <audio id="backgroundMusic" src="assets/music.mp3" loop></audio>
  <button id="exitButton">Tho√°t üéÄ</button>
</div>

<script>
const envelope = document.getElementById("envelope");
const envelopeContainer = document.getElementById("envelope-container");
const card = document.getElementById("card");
const gift = document.getElementById("gift");
const popupContainer = document.getElementById("popupContainer");
const dialog = document.getElementById("startDialog");
const audio = document.getElementById("backgroundMusic");
const exitButton = document.getElementById("exitButton");

let popupInterval;

// üéÄ M·ªü phong b√¨
envelopeContainer.addEventListener("click", () => {
document.querySelector(".bow").classList.add("hide");
  envelope.classList.add("open");
  setTimeout(() => {
    envelopeContainer.style.display = "none";
    card.style.display = "block";
    audio.play().catch(() => console.log("Kh√¥ng ph√°t ƒë∆∞·ª£c nh·∫°c t·ª± ƒë·ªông"));
  }, 1500);
});

// üéÅ Khi nh·∫•p h·ªôp qu√† -> chuy·ªÉn sang popup
gift.addEventListener("click", () => {
  card.style.opacity = 0;
  setTimeout(() => {
    card.style.display = "none";
    popupContainer.style.display = "block";
    document.body.classList.add("bgAnimated");
  }, 1000);
});

const messages = [
  "Ch√∫c 20/10 th·∫≠t vui üíê",
  "Lu√¥n xinh ƒë·∫πp v√† r·ª±c r·ª° üå∏",
  "Ng√†y tuy·ªát v·ªùi nh√© üòò",
  "H·∫°nh ph√∫c ng·∫≠p tr√†n üíñ",
  "C∆∞·ªùi th·∫≠t t∆∞∆°i nhaa üòç"
];

// üåà Popup
function createPopup() {
  const popup = document.createElement("div");
  popup.className = "popup";
  popup.textContent = messages[Math.floor(Math.random() * messages.length)];
  
  const x = Math.random() * (window.innerWidth - 150);
  const y = Math.random() * (window.innerHeight - 80);
  popup.style.left = `${x}px`;
  popup.style.top = `${y}px`;

  document.body.appendChild(popup);
  setTimeout(() => popup.remove(), 5000);
}

function startPopups() {
  let active = 0;
  const maxPopups = 40;
  const createInterval = 250;
  popupInterval = setInterval(() => {
    if (active < maxPopups) {
      createPopup();
      active++;
      setTimeout(() => active--, 5000);
    }
  }, createInterval);
}

function stopPopups() {
  clearInterval(popupInterval);
  popupContainer.style.display = "none";
  document.body.classList.remove("bgAnimated");
  document.querySelectorAll(".popup").forEach(p => p.remove());
  audio.pause();
  card.style.opacity = 1;
  card.style.display = "block";
  exitButton.style.display = "none";
}

function enterFullscreen() {
  const elem = document.documentElement;
  if (elem.requestFullscreen) elem.requestFullscreen();
}

document.addEventListener("click", function startExperience() {
  if (popupContainer.style.display === "block") {
    dialog.style.display = "none";
    audio.play().catch(() => console.log("Kh√¥ng ph√°t ƒë∆∞·ª£c nh·∫°c"));
    enterFullscreen();
    startPopups();
    exitButton.style.display = "block";
    document.removeEventListener("click", startExperience);
  }
});

exitButton.addEventListener("click", stopPopups);
</script>
</body>
</html>
